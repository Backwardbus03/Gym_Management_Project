{% extends 'users/base.html' %}
{% block title %}Trainer Dashboard{% endblock %}
{% block content %}
<div class="dashboard-container">
    <!-- Left Card - Main Dashboard -->
    <div class="login-box">
        <h2>Welcome, {{ user.username }}</h2>

        <div class="section">
            <h3>Today's Activities</h3>
            {% for activity in todays_activities %}
                <p>{{ activity.trainee.user.username }}: {{ activity.name }} for {{ activity.duration_minutes }} mins</p>
            {% empty %}
                <p>No activities logged today.</p>
            {% endfor %}
        </div>

        <div class="section">
            <h3>Today's Weight Logs</h3>
            {% for log in todays_weights %}
                <p>{{ log.trainee.user.username }}: {{ log.weight_kg }} kg</p>
            {% empty %}
                <p>No weight logs today.</p>
            {% endfor %}
        </div>

        <div class="signup-section" style="margin-top: 30px;">
            <form method="post" action="{% url 'logout' %}">
                {% csrf_token %}
                <button type="submit" class="btn">Logout</button>
            </form>
        </div>
    </div>

    <!-- Right Card - Trainees List -->
    <div class="login-box">
        <h2>Your Trainees</h2>

        <div class="section">
            <table class="trainees-table">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Recommendation</th>
                        <th>Summary</th>
                        <th>Attendance</th>
                    </tr>
                </thead>
                <tbody>
                    {% for trainee in trainees %}
                        <tr>
                            <td>{{ trainee.user.username }}</td>
                            <td><a href="{% url 'push_recommendation' trainee.id %}" class="signup-link">Send</a></td>
                            <td><a href="{% url 'trainer_workouts' %}?trainee_id={{ trainee.id }}" class="signup-link">View</a></td>
                            <td><a href="{% url 'trainer_attendance' %}?trainee_id={{ trainee.id }}" class="signup-link">View</a></td>
                        </tr>
                    {% empty %}
                        <tr><td colspan="4">No trainees assigned.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<style>
    .dashboard-container {
        display: flex;
        gap: 20px;
        justify-content: center;
        max-width: 1200px;
        margin: 0 auto;
    }

    .login-box {
        flex: 1;
    }

    .trainees-table {
        width: 100%;
        border-collapse: collapse;
    }

    .trainees-table th,
    .trainees-table td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #555;
    }

    .signup-link {
        display: block;
        text-align: center;
    }

    @media (max-width: 768px) {
        .dashboard-container {
            flex-direction: column;
        }
    }
</style>
{% endblock %}